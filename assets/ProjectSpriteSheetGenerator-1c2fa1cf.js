import{aD as Se,y as M,aE as Re,w as R,aF as ie,aG as X,aH as Te,aI as _e,aJ as Y,aK as G,aL as we,aM as Oe,aN as $e,a as v,U as Ce,j as u,z as Ie,A as ke,t as Pe,aO as z,s as Ee,x as Le,r as ce,i as le,ac as F,ad as De,B as P,h as Fe,aP as Q}from"./index-93216a4a.js";import{d as Ae}from"./Delete-527b2145.js";import{P as Ue}from"./Menu-4079a4f7.js";import{u as Me,A as Ge,T as Z}from"./TextField-90e7f1c3.js";import{T as E}from"./index-cbf0c5bc.js";import{B}from"./Button-47a13ba1.js";import{G as W}from"./Grid-6c6affcb.js";import"./getThemeProps-6ce7842d.js";const Be=["ownerState"],We=["variants"],Ve=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Ne(e){return Object.keys(e).length===0}function He(e){return typeof e=="string"&&e.charCodeAt(0)>96}function V(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function ee(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}const qe=ie(),Je=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function A({defaultTheme:e,theme:t,themeId:r}){return Ne(t)?e:t[r]||t}function Ke(e){return e?(t,r)=>r[e]:null}function U(e,t,r){let{ownerState:n}=t,a=M(t,Be);const o=typeof e=="function"?e(R({ownerState:n},a)):e;if(Array.isArray(o))return o.flatMap(l=>U(l,R({ownerState:n},a),r));if(o&&typeof o=="object"&&Array.isArray(o.variants)){const{variants:l=[]}=o;let i=M(o,We);return l.forEach(c=>{let g=!0;if(typeof c.props=="function"?g=c.props(R({ownerState:n},a,n)):Object.keys(c.props).forEach(h=>{(n==null?void 0:n[h])!==c.props[h]&&a[h]!==c.props[h]&&(g=!1)}),g){Array.isArray(i)||(i=[i]);const h=typeof c.style=="function"?c.style(R({ownerState:n},a,n)):c.style;i.push(r?ee(X(h),r):h)}}),i}return r?ee(X(o),r):o}function Xe(e={}){const{themeId:t,defaultTheme:r=qe,rootShouldForwardProp:n=V,slotShouldForwardProp:a=V}=e,o=l=>Te(R({},l,{theme:A(R({},l,{defaultTheme:r,themeId:t}))}));return o.__mui_systemSx=!0,(l,f={})=>{Se(l,s=>s.filter(d=>!(d!=null&&d.__mui_systemSx)));const{name:i,slot:c,skipVariantsResolver:g,skipSx:h,overridesResolver:T=Ke(Je(c))}=f,_=M(f,Ve),I=i&&i.startsWith("Mui")||c?"components":"custom",$=g!==void 0?g:c&&c!=="Root"&&c!=="root"||!1,m=h||!1;let b,j=V;c==="Root"||c==="root"?j=n:c?j=a:He(l)&&(j=void 0);const p=Re(l,R({shouldForwardProp:j,label:b},_)),y=s=>typeof s=="function"&&s.__emotion_real!==s||_e(s)?d=>{const x=A({theme:d.theme,defaultTheme:r,themeId:t});return U(s,R({},d,{theme:x}),x.modularCssLayers?I:void 0)}:s,S=(s,...d)=>{let x=y(s);const O=d?d.map(y):[];i&&T&&O.push(C=>{const w=A(R({},C,{defaultTheme:r,themeId:t}));if(!w.components||!w.components[i]||!w.components[i].styleOverrides)return null;const k=w.components[i].styleOverrides,D={};return Object.entries(k).forEach(([xe,je])=>{D[xe]=U(je,R({},C,{theme:w}),w.modularCssLayers?"theme":void 0)}),T(C,D)}),i&&!$&&O.push(C=>{var w;const k=A(R({},C,{defaultTheme:r,themeId:t})),D=k==null||(w=k.components)==null||(w=w[i])==null?void 0:w.variants;return U({variants:D},R({},C,{theme:k}),k.modularCssLayers?"theme":void 0)}),m||O.push(o);const J=O.length-d.length;if(Array.isArray(s)&&J>0){const C=new Array(J).fill("");x=[...s,...C],x.raw=[...s.raw,...C]}const K=p(x,...O);return l.muiName&&(K.muiName=l.muiName),K};return p.withConfig&&(S.withConfig=p.withConfig),S}}const Ye=Xe(),ze=Ye,Qe=["component","direction","spacing","divider","children","className","useFlexGap"],Ze=ie(),et=ze("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function tt(e){return Me({props:e,name:"MuiStack",defaultTheme:Ze})}function rt(e,t){const r=v.Children.toArray(e).filter(Boolean);return r.reduce((n,a,o)=>(n.push(a),o<r.length-1&&n.push(v.cloneElement(t,{key:`separator-${o}`})),n),[])}const nt=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],ot=({ownerState:e,theme:t})=>{let r=R({display:"flex",flexDirection:"column"},Y({theme:t},G({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=we(t),a=Object.keys(t.breakpoints.values).reduce((i,c)=>((typeof e.spacing=="object"&&e.spacing[c]!=null||typeof e.direction=="object"&&e.direction[c]!=null)&&(i[c]=!0),i),{}),o=G({values:e.direction,base:a}),l=G({values:e.spacing,base:a});typeof o=="object"&&Object.keys(o).forEach((i,c,g)=>{if(!o[i]){const T=c>0?o[g[c-1]]:"column";o[i]=T}}),r=Oe(r,Y({theme:t},l,(i,c)=>e.useFlexGap?{gap:z(n,i)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${nt(c?o[c]:e.direction)}`]:z(n,i)}}))}return r=$e(t.breakpoints,r),r};function st(e={}){const{createStyledComponent:t=et,useThemeProps:r=tt,componentName:n="MuiStack"}=e,a=()=>ke({root:["root"]},i=>Pe(n,i),{}),o=t(ot);return v.forwardRef(function(i,c){const g=r(i),h=Ce(g),{component:T="div",direction:_="column",spacing:I=0,divider:$,children:m,className:b,useFlexGap:j=!1}=h,p=M(h,Qe),y={direction:_,spacing:I,useFlexGap:j},S=a();return u.jsx(o,R({as:T,ownerState:y,ref:c,className:Ie(S.root,b)},p,{children:$?rt(m,$):m}))})}const at=st({createStyledComponent:Ee("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Le({props:e,name:"MuiStack"})}),it=at;var H={},ct=le;Object.defineProperty(H,"__esModule",{value:!0});var ue=H.default=void 0,lt=ct(ce()),ut=u;ue=H.default=(0,lt.default)((0,ut.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var q={},ft=le;Object.defineProperty(q,"__esModule",{value:!0});var fe=q.default=void 0,dt=ft(ce()),mt=u;fe=q.default=(0,dt.default)((0,mt.jsx)("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download");var pt=function(e){return function(t,r){var n=v.useRef(!1);e(function(){return function(){n.current=!1}},[]),e(function(){if(!n.current)n.current=!0;else return t()},r)}};function de(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,o=[],l;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)o.push(a.value)}catch(f){l={error:f}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return o}function ht(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var me=function(e){return typeof e=="function"},vt=!1;const pe=vt,gt=pt(v.useEffect);function he(e){var t=v.useRef(e);return t.current=e,t}var yt=function(e){pe&&(me(e)||console.error("useUnmount expected parameter is a function, got ".concat(typeof e)));var t=he(e);v.useEffect(function(){return function(){t.current()}},[])};const bt=yt;function xt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ve=xt,jt=typeof F=="object"&&F&&F.Object===Object&&F,St=jt,Rt=St,Tt=typeof self=="object"&&self&&self.Object===Object&&self,_t=Rt||Tt||Function("return this")(),ge=_t,wt=ge,Ot=function(){return wt.Date.now()},$t=Ot,Ct=/\s/;function It(e){for(var t=e.length;t--&&Ct.test(e.charAt(t)););return t}var kt=It,Pt=kt,Et=/^\s+/;function Lt(e){return e&&e.slice(0,Pt(e)+1).replace(Et,"")}var Dt=Lt,Ft=ge,At=Ft.Symbol,ye=At,te=ye,be=Object.prototype,Ut=be.hasOwnProperty,Mt=be.toString,L=te?te.toStringTag:void 0;function Gt(e){var t=Ut.call(e,L),r=e[L];try{e[L]=void 0;var n=!0}catch{}var a=Mt.call(e);return n&&(t?e[L]=r:delete e[L]),a}var Bt=Gt,Wt=Object.prototype,Vt=Wt.toString;function Nt(e){return Vt.call(e)}var Ht=Nt,re=ye,qt=Bt,Jt=Ht,Kt="[object Null]",Xt="[object Undefined]",ne=re?re.toStringTag:void 0;function Yt(e){return e==null?e===void 0?Xt:Kt:ne&&ne in Object(e)?qt(e):Jt(e)}var zt=Yt;function Qt(e){return e!=null&&typeof e=="object"}var Zt=Qt,er=zt,tr=Zt,rr="[object Symbol]";function nr(e){return typeof e=="symbol"||tr(e)&&er(e)==rr}var or=nr,sr=Dt,oe=ve,ar=or,se=0/0,ir=/^[-+]0x[0-9a-f]+$/i,cr=/^0b[01]+$/i,lr=/^0o[0-7]+$/i,ur=parseInt;function fr(e){if(typeof e=="number")return e;if(ar(e))return se;if(oe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=sr(e);var r=cr.test(e);return r||lr.test(e)?ur(e.slice(2),r?2:8):ir.test(e)?se:+e}var dr=fr,mr=ve,N=$t,ae=dr,pr="Expected a function",hr=Math.max,vr=Math.min;function gr(e,t,r){var n,a,o,l,f,i,c=0,g=!1,h=!1,T=!0;if(typeof e!="function")throw new TypeError(pr);t=ae(t)||0,mr(r)&&(g=!!r.leading,h="maxWait"in r,o=h?hr(ae(r.maxWait)||0,t):o,T="trailing"in r?!!r.trailing:T);function _(s){var d=n,x=a;return n=a=void 0,c=s,l=e.apply(x,d),l}function I(s){return c=s,f=setTimeout(b,t),g?_(s):l}function $(s){var d=s-i,x=s-c,O=t-d;return h?vr(O,o-x):O}function m(s){var d=s-i,x=s-c;return i===void 0||d>=t||d<0||h&&x>=o}function b(){var s=N();if(m(s))return j(s);f=setTimeout(b,$(s))}function j(s){return f=void 0,T&&n?_(s):(n=a=void 0,l)}function p(){f!==void 0&&clearTimeout(f),c=0,n=i=a=f=void 0}function y(){return f===void 0?l:j(N())}function S(){var s=N(),d=m(s);if(n=arguments,a=this,i=s,d){if(f===void 0)return I(i);if(h)return clearTimeout(f),f=setTimeout(b,t),_(i)}return f===void 0&&(f=setTimeout(b,t)),l}return S.cancel=p,S.flush=y,S}var yr=gr;const br=De(yr);function xr(){var e=(typeof global>"u"?"undefined":typeof global)=="object"&&global&&global.Object===Object&&global,t=typeof self=="object"&&self&&self.Object===Object&&self;return e||t}xr()||(global.Date=Date);function jr(e,t){var r;pe&&(me(e)||console.error("useDebounceFn expected parameter is a function, got ".concat(typeof e)));var n=he(e),a=(r=t==null?void 0:t.wait)!==null&&r!==void 0?r:1e3,o=v.useMemo(function(){return br(function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return n.current.apply(n,ht([],de(l),!1))},a,t)},[]);return bt(function(){o.cancel()}),{run:o,cancel:o.cancel,flush:o.flush}}function Sr(e,t,r){var n=de(v.useState({}),2),a=n[0],o=n[1],l=jr(function(){o({})},r).run;v.useEffect(function(){return l()},t),gt(e,[a])}const kr=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(3),[a,o]=v.useState(2),[l,f]=v.useState(null),[i,c]=v.useState(""),[g,h]=v.useState(!1),T=v.useRef(null),_=v.useRef(null),I=async m=>{const b=m.target.files;if(!b||b.length===0)return;h(!0),$();const j=Array.from(b).map(p=>new Promise((y,S)=>{const s=new Image;s.src=URL.createObjectURL(p),s.onload=()=>{URL.revokeObjectURL(s.src),y({element:s,name:p.name})},s.onerror=()=>{URL.revokeObjectURL(s.src),S(`Could not load image: ${p.name}`)}}));try{const p=await Promise.all(j);if(p.length>1){const y=p[0].element,{width:S,height:s}=y;for(const{element:d,name:x}of p)if(d.width!==S||d.height!==s){f(`Dimension mismatch: All images must be ${S}x${s}px. Image '${x}' is ${d.width}x${d.height}px.`),h(!1);return}}t(p)}catch(p){f(p instanceof Error?p.message:String(p))}finally{h(!1),_.current&&(_.current.value="")}};Sr(()=>{const m=T.current;if(!m||e.length===0){c("");return}const b=m.getContext("2d");if(!b)return;const{width:j,height:p}=e[0].element;m.width=j*r,m.height=p*a,b.clearRect(0,0,m.width,m.height);for(let y=0;y<e.length&&y<r*a;y++){const S=e[y].element,s=y%r,d=Math.floor(y/r),x=s*j,O=d*p;b.drawImage(S,x,O,j,p)}c(m.toDataURL("image/png"))},[e,r,a],{wait:500});const $=()=>{f(null),t([])};return u.jsx(P,{sx:{minHeight:"75vh",display:"grid",placeItems:"center"},children:u.jsx(Ue,{elevation:3,sx:{p:4,maxWidth:800,margin:"auto"},children:u.jsxs(it,{spacing:3,children:[u.jsx(E,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"👾 Sprite Sheet Generator"}),u.jsx(E,{variant:"h6",component:"h1",gutterBottom:!0,align:"center",children:"Your images are not stored in any server. Completely client side."}),u.jsxs(P,{children:[u.jsx(E,{variant:"h6",component:"h2",gutterBottom:!0,children:"1. Upload Images"}),u.jsx("input",{type:"file",multiple:!0,accept:"image/*",ref:_,onChange:I,style:{display:"none"}}),u.jsx(B,{variant:"contained",startIcon:g?u.jsx(Fe,{size:20,color:"inherit"}):u.jsx(ue,{}),onClick:()=>{var m;return(m=_.current)==null?void 0:m.click()},disabled:g,children:g?"Processing...":"Select Images"}),u.jsx(E,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Select multiple images. All images must have the same dimensions."})]}),l&&u.jsx(Ge,{severity:"error",children:l}),u.jsxs(P,{children:[u.jsx(E,{variant:"h6",component:"h2",gutterBottom:!0,children:"2. Configure Grid Layout"}),u.jsxs(W,{container:!0,spacing:2,children:[u.jsx(W,{item:!0,xs:6,children:u.jsx(Z,{label:"Columns",type:"number",value:r,onChange:m=>n(Q(parseInt(m.target.value),1,100)),InputProps:{inputProps:{min:1,max:100}},fullWidth:!0})}),u.jsx(W,{item:!0,xs:6,children:u.jsx(Z,{label:"Rows",type:"number",value:a,onChange:m=>o(Q(parseInt(m.target.value),1,100)),InputProps:{inputProps:{min:1,max:100}},fullWidth:!0})})]})]}),i&&a>=1&&r>=1&&u.jsxs(P,{children:[u.jsx(E,{variant:"h6",component:"h2",gutterBottom:!0,children:"3. Download Result"}),u.jsx(P,{sx:{border:"2px dashed",borderColor:"divider",p:1,borderRadius:1,mb:2},children:u.jsx("img",{src:i,alt:"Collated",style:{width:"100%",display:"block"}})}),u.jsxs(P,{sx:{display:"flex",justifyContent:"space-between"},children:[u.jsx("a",{href:i,download:"collated-image.png",style:{textDecoration:"none"},children:u.jsx(B,{variant:"contained",color:"success",startIcon:u.jsx(fe,{}),children:"Download Image"})}),u.jsx(B,{color:"error",variant:"contained",startIcon:u.jsx(Ae,{}),onClick:$,children:"Reset"})]})]}),u.jsx("canvas",{ref:T,style:{display:"none"}})]})})})};export{kr as default};
